# docker 주요 명령 익히기2 (컨테이너를 다루는 다양한 옵션)

# 4. 컨테이너 실행

```docker
docker start 컨테이너이름
```

- 위 예에서 다운로드 받고 생성한 ubuntu 컨테이너를 실행하면, 바로 중지됨
    - docker start ubuntu 명령 후에 docker ps를 실행하면, ubuntu 컨테이너를 볼 수 없음(실행 중인 컨테이너만 나오기 때문)
    - 이유(깊은 이해가 필요한 부분, 컴퓨터 공학, 특히 운영체제에 대한 깊은 이해가 없다면, 우선은 넘겨도 좋은 부분)
        - 우선, docker는 컨테이너를 하나의 응용 프로그램으로 다루고 있음을 이해해야함
            - 즉, 운영체제가 아니라 운영체제 상에서 실행하는 응용 프로그램을 포함해서 하나의 프로그램을 실행하고 중지하는 것으로 다루고 있음
            - 따라서 컨테이너에서 실행하게끔 설정된 응용 프로그램의 실행이 끝나면 해당 컨테이너는 중지됨
        - 이미지 세부 정보를 알 수 있는 docker inspect 명령을 우선 이해하기
            - 다음과 같이 명령하면, Cmd항목에 해당 컨테이너 실행 시, 실행하는 명령이 기재되어 있음
            
            ![Untitled](docker%20%E1%84%8C%E1%85%AE%E1%84%8B%E1%85%AD%20%E1%84%86%E1%85%A7%E1%86%BC%E1%84%85%E1%85%A7%E1%86%BC%20%E1%84%8B%E1%85%B5%E1%86%A8%E1%84%92%E1%85%B5%E1%84%80%E1%85%B52%20(%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%90%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%82%E1%85%A5%E1%84%85%E1%85%B3%E1%86%AF%20%E1%84%83%E1%85%A1%E1%84%85%E1%85%AE%E1%84%82%E1%85%B3%E1%86%AB%20%20b43ba99b8aab44c8b0390fa138b4550d/Untitled.png)
            
            - 해당 명령은 /bin/bash 이고, 이는 bash라는 쉘 프로그램임
            - 해당 명령은 터미널을 통해 키보드 입력을 표준 스트림 중 표준입력(STDIN)으로 받을 수 있는 상태이어야 대기 상태로 계속 실행되며, 그렇지 않다면 입력 받을 수 없기 때문에 종료됨
            - 따라서, 단순히 docker start ubuntu와 같이 별도 터미널 및 표준 입력 연결 설정 없이 실행 시 실행하자마자 끝나고 이에 따라 해당 컨테이너도 바로 중지상태가 된다고 이해하면 됨
            - 관련 설정 및 실행 방법은 다음 docker run명령으로 상세히 이해하기로 함

### [참고] 표준 스트림

- 리눅스에서 동작하는 프로그램은 실행 시, 세 개의 스트림이 오픈됨
    - STDIN(표준입력)
    - STDOUT(표준출력)
    - STDERR(표준에러)
- 보통 터미널은 오픈하고, 명령을 실행하면 터밀널의 표준 스트림이 명령에 해당하는 프로세스에 상속되어 해당 프로세스는 터미널의 표준 입출력을 사용할 수 있게 됨
    - 터미널 실행시 보통 쉘 프로그램이 실행되고 쉘프로그램을 통해 명령을 실행하면 명령에 해당하는 프로그램을 쉘 프로그램이 실행함
    - 이 때 내부적으로 쉘 프로그램은 fork() 시스템콜을 사용해서, 명령에 해당하는 프로그램을 실행시킴
    - fork() 시스템콜을 사용할 경우, 해당 함수를 호출하는 프로그램은 부모 프로세스가 되고, fork()를 통해 실행되는 프로그램은 자식 프로세스가 됨
        - 더 깊이는 부모 프로세스가 자식 프로세스에 복사되고, 이후에 자식 프로세스 실행에 필요한 데이터가 업데이트되는 형태로 실행되므로,
        - 부모 프로세스의 표준입출력은 그대로 자식 프로세스에 복사되기 때문에, 결과적으로 상속과 유사한 기능을 하게 되는 셈