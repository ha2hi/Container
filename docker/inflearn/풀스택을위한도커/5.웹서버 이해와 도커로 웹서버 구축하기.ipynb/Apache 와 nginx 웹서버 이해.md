# Apache 와 nginx 웹서버 이해

### 1. 웹서버

- 웹서버는 HTTP 요청을 읽어서, 응답을 해주는 프로그램
- 웹서버 프로그램을 서버 상에 설치하여, 특정 HTTP요청에 따라, 서비스를 제공해주는 방식으로 웹서비스를 구현
- 상용으로 많이 쓰이는 웹서버 프로그램은 크게 apache와 nginx(엔진엑스라고 부름)가 있으며, 간략히 두 프로그램을 비교해보며, 웹서버에 대해 보다 이해해보도록 함

### 2. Apache vs Nginx

- Apache는 오픈 소스 프로젝트로 가장 유명한 프로그램 중 하나
- 수십년간 웹서버 프로그램으로는 Apache 프로그램을 사용하였음

### 2.1. Apache 구동 방식

- Apache는 꾸준히 성능을 개선하고 있으며, 다음과 같이 두 가지 기본적인 방식을 지원함
    - Prefork MPM(Multi Processing Module)방식
        - HTTP요청이 올 때마다, 프로세스를 복제하여, 각각 별도 프로세스에서 해당 HTTP요청 처리
    - Worker MPM(Multi Processing Module방식
        - 하나의 HTTP 연결 후 여러 요청을 처리하기 위해 복제된 프로세스 내에서 여러 쓰레드를 생성하여, 여러 HTTP요청을 처리하는 방식

⇒ HTTP 요청이 들어올 시 프로세스 혹은 스레드를 생성하기 때문에 지연과 자원이 쓰임.

### 2.2. Nginx 구동 박식

- Event Driven 방식
    - 하나의 프로세스로 동작하며, HTTP요청을 event로 비동기식으로 처리함
        - 대부분의 HTTP응답은 결국 html파일을 제공하는 것이므로 I/O작업
        - 따라서 IO작업으로 event를 포워딩하고 요청 순이 아닌, 요청 작업이 끝난 순으로 처리함(비동기식)
    - HTTP요청마다, 프로세스든 쓰레드든 생성이 필요없으므로 시스템 자원 관리에 장점이 있음